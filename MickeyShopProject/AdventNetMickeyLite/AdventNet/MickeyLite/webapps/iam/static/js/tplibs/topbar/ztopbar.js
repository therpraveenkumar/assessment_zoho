!function(){function getI18NString(key,stringArray){return i8nText=zjQuery.i18n("ztopbar",key,stringArray)}function getString(key){return ztopbar.i18nKeys["fcomponents.ztopbar."+key]}var zTopbar=function(data){function _createSwitchToMenu(){var myAppsObj=data.userInfo&&data.userInfo.appsInUse?data.userInfo.appsInUse:"/allapps";if(ztopbarObj._zohoAppsMenu&&myAppsObj&&ztopbarObj._signInStatus)if("string"==typeof myAppsObj){var myAppsData={};zjQuery.ajax({url:myAppsObj,type:"POST",beforeSend:function(xhr){xhr.overrideMimeType("text/plain; charset=x-user-defined")},error:function(){zjQuery("#ztb-all-apps .ztb-allApps").addClass("ztb-allApps-only"),zjQuery("#ztb-apps").addClass("ztb-collapse"),"zoho"===ztopbarObj._suite&&createAllAppsContainer(),zjQuery("#ztb-all-apps").find(".ztb-products").length||zjQuery("#ztb-switch-menu").hide(),ztopbarObj._createTooltip()},success:function(responseObj){myAppsData=responseObj,"object"!=typeof myAppsData&&(myAppsData=zjQuery.parseJSON(myAppsData))}}).done(function(){createMyAppsContainer(myAppsData)})}else createMyAppsContainer(myAppsObj);else zjQuery("#ztb-apps").addClass("ztb-collapse"),ztopbarObj._zohoAppsMenu&&"zoho"===ztopbarObj._suite&&createAllAppsContainer(),ztopbarObj._createTooltip();ztopbarObj._zohoAppsMenu&&(menu.data("itemType","switch-menu"),menu.bind("click.menu",function(){ztopbarObj._toggle(menu,zjQuery("#ztb-apps"))}))}function getConfigMap(configArray){var output={};if(configArray)for(var j=0;j<configArray.length;j++){var config=configArray[j],confValue=config.config_value;output[config.config_name]=confValue||null}return output}function createMyAppsContainer(usedApps){var myApps={},tempAppArray=[];if("zoho"!==ztopbarObj._suite&&zjQuery.each(appsShortNameMap,function(i,value){tempAppArray.push(value)}),usedApps.apps){usedApps=usedApps.apps;var tempJSON={};zjQuery.each(appsShortNameMap,function(i,value){tempJSON[value]=value}),appsShortNameMap=tempJSON}for(var appNames=[],i=0;i<usedApps.length;i++){var app=usedApps[i],appName=appsShortNameMap[app.app_name.toLowerCase()];if(!appName||-1!=zjQuery.inArray(appName,appNames)){for(var inAppsList=!1,newAppName="",k=0;k<tempAppArray.length;k++)newAppName=tempAppArray[k].toLowerCase(),app.app_name.toLowerCase().indexOf(newAppName)>0&&(inAppsList=!0,appName=newAppName);if(!inAppsList){usedApps.splice(i,1),i--;continue}}if("zoho"===ztopbarObj._suite||-1!==ztopbar.supportedApps.indexOf(appName)){ztopbarObj._isAppsInfoMapped=!0;var subDomain=app.url||app.default_sub_domain,tryNowUrl=app.trynow_url;if(void 0!==app.configuration){var configMap=getConfigMap(app.configuration);tryNowUrl=configMap.zh_trynow_url,tryNowUrl&&0!==tryNowUrl.indexOf("//")&&(tryNowUrl=subDomain+tryNowUrl)}var home_page=subDomain+(app.home_page&&app.home_page.length?app.home_page:"");myApps[appName]={url:app.app_url||home_page,tryNowURL:tryNowUrl||subDomain,isMyApp:app.is_used_app,app_name:"livedesk"===appName?"salesiq":appName},ztopbarObj._myApps=ztopbarObj._myApps?ztopbarObj._myApps:app.is_used_app,appNames.push(appName)}}ztopbarObj._myAppsData=myApps,("zoho"===ztopbarObj._suite||ztopbarObj._isAppsInfoMapped)&&createAllAppsContainer();var allAppsDiv=zjQuery("#ztb-all-apps");if(ztopbarObj._myApps){var appsContainer=zjQuery("#ztb-apps"),myAppsDiv=zjQuery("<div>").attr({id:"ztb-myapps","class":"ztb-myapps-count-"+appNames.length}).appendTo(appsContainer);myAppsDiv.css({opacity:1,"margin-left":0}),ztopbarObj._buildMyApps();var navigationElement=zjQuery("#ztb-myapps-nav"),navigationElementHeight=navigationElement.height()+1;0===allAppsDiv.find(".ztb-products").length&&(navigationElement.hide(),navigationElementHeight=0);var gotoMyapps=zjQuery("<div>").attr({id:"ztb-goto-myapps","class":"ztb-go-to-myapps"}).html("<span class='ztb-icon-group ztab-myapps-icon'></span><span class='ztab-myapps-text'>"+ztopbarObj._getString("myAppsLabel")+"</span>").appendTo(navigationElement);zjQuery("#ztb-goto-myapps").hide();var myAppsContent=zjQuery("#ztb-myapps-list .ztb-myapps-cont"),myAppsFirstListingDiv=myAppsContent.first();zjQuery("#ztb-myapps-list").width(3*myAppsFirstListingDiv.outerWidth());var allAppsHeight=allAppsDiv.height(),myAppsHeight=myAppsDiv.height(),_appsContainerWidth=appsContainer.width(),myAppsListWidth=myAppsFirstListingDiv.width();myAppsListWidth+94>_appsContainerWidth&&(_appsContainerWidth=myAppsListWidth+94);var _appsContainerHeight=myAppsHeight;allAppsHeight>myAppsHeight&&(_appsContainerHeight=allAppsHeight,paddingTop=parseFloat(myAppsFirstListingDiv.css("padding-top"))+(allAppsHeight-myAppsHeight)/2,myAppsContent.css("padding-top",paddingTop)),allAppsDiv.css({height:_appsContainerHeight}),appsContainer.css({width:_appsContainerWidth,height:_appsContainerHeight+navigationElementHeight}),allAppsDiv.css({"margin-top":-(_appsContainerHeight+8)+"px",opacity:0}),myAppsDiv.css({height:_appsContainerHeight,width:_appsContainerWidth}),gotoMyapps.click(function(){zjQuery("#ztb-goto-myapps").hide(),zjQuery("#ztb-goto-allapps").show(),zjQuery("#ztb-slide-window").show(),allAppsDiv.css({"margin-top":-(_appsContainerHeight+8)+"px",opacity:0}),zjQuery("#ztb-myapps").css({opacity:1,"margin-left":0})}),appsContainer.addClass("ztb-collapse"),allAppsDiv.find(".ztb-products").length||zjQuery("#ztb-myapps-list").find(".ztb-myapps-icon").length||zjQuery("#ztb-switch-menu").hide()}else zjQuery("#ztb-all-apps .ztb-allApps").addClass("ztb-allApps-only"),allAppsDiv.find(".ztb-products").length||zjQuery("#ztb-switch-menu").hide();ztopbarObj._createTooltip()}function createAllAppsContainer(){var appsContainer=zjQuery("<div>").attr({id:"ztb-apps","class":"ztb-apps ztb-font-family "+ztopbarObj._ieClass});zjQuery("<div>").attr("class","ztb-apps-grey").appendTo(appsContainer);for(var allAppsDiv=zjQuery("<div>").attr("id","ztb-all-apps").appendTo(appsContainer),allAppsWrapper=zjQuery("<div>").attr("class","ztb-allApps ztb-allapps").appendTo(allAppsDiv),allAppsWrapperInner=zjQuery("<div>").appendTo(allAppsWrapper),appsLayout=ztopbar.allAppsCategoryListOrder,supportedApps=ztopbar.supportedApps,appsJSON=ztopbar.getDefaults.getAllAppsJSON(),allAppsHTMLArray=[],allAppsHTML="",i=0;i<appsJSON.length;i++)if(appsJSON[i]&&appsJSON[i].apps){allAppsHTML="<ul class='ztb-ul'>",allAppsHTML+="<li class='ztb-apps-title'>"+ztopbarObj._getString(appsJSON[i].category)+"</li>";for(var appList=0;appList<appsJSON[i].apps.length;appList++){var appName=appsJSON[i].apps[appList];("zoho"===ztopbarObj._suite||supportedApps.indexOf(appName)>-1)&&(allAppsHTML+="<li data-zapp='"+appName+"' class='ztb-products'><a class='ztb-anchor' href='"+ztopbarObj._getTryNowURL(appName)+"'><span class='zicon-apps-16 zicon-apps-"+appName+"'></span><div class='ztb-app-name'>"+ztopbarObj._getString(appName)+"</div></a></li>")}allAppsHTML+="</ul>",allAppsHTMLArray[appsJSON[i].position]=allAppsHTML}for(var layoutGrid=["","","",""],i=0;i<appsLayout.length;i++)for(var j=0;j<appsLayout[i].length;j++){var allappsHTML=allAppsHTMLArray[appsLayout[i][j]];void 0!==allappsHTML&&""!==allappsHTML&&(layoutGrid[j+1]+=allappsHTML)}allAppsHTML="";for(var i=0;i<layoutGrid.length;i++)""!==layoutGrid[i]&&(allAppsHTML+='<div class="ztb-appslist-'+i+'">'+layoutGrid[i]+"</div>");allAppsWrapperInner.append(allAppsHTML),appsContainer.appendTo(zjQuery("body")),zjQuery("#ztb-all-apps .ztb-products").bind("click.apps",function(e){ztopbarObj._closeOpenedItems(),ztopbarObj.data.product.toLowerCase()===zjQuery(this).data("zapp")?location.reload():window.open(zjQuery(this).find("a")[0].href,"_blank"),e.preventDefault(),e.stopPropagation()})}if(window===this&&data&&data.properWay){"undefined"==typeof zjQuery&&(zjQuery=window.jQuery);var ztopbarObj=new zTopbar(data);ztopbarObj.data=data,ztopbarObj.isOpen=!0,ztopbarObj._init(data);var mainElement=zjQuery("#ztb-topband");if(mainElement.length?(ztopbarObj.mainCont=mainElement,ztopbarObj.mainCont.addClass("ztb-topband")):ztopbarObj.mainCont=zjQuery(".ztb-topband").attr("id","ztb-topband"),data.position&&ztopbarObj.mainCont.addClass("ztb-fixed"),ztopbarObj._isEditor){var innerHTML=ztopbarObj.mainCont.html();innerHTML&&innerHTML.trim().length&&(""===data.placeHolderHTML||void 0===data.placeHolderHTML)&&(ztopbarObj.mainCont.html(""),data.placeHolderHTML=innerHTML)}else ztopbarObj.mainCont.html(""),data.placeHolderHTML="";if(ztopbarObj._displayLogo=ztopbarObj._isEditor?!1:!0,ztopbarObj._signInStatus=data.userInfo&&data.userInfo.emailAddress&&data.userInfo.userId?!0:!1,ztopbarObj.ztbContainer=zjQuery("<div>").attr({id:"ztb-container"}).appendTo(ztopbarObj.mainCont),ztopbarObj._zohoAppsMenu)var label=ztopbarObj._replaceMessage(ztopbarObj._getString("switchToMenuLabel"),[ztopbar.suite]),menu=zjQuery("<div>").attr({ztooltip:label,"class":"ztooltip ztb-font-family "+("zoho"===ztopbarObj._suite?"ztb-deployment-zoho":""),id:"ztb-switch-menu"}).html("<div class='ztb-switch-to-square'><span></span><span class='two'></span><span></span><span></span><span class='five'></span><span></span><span></span><span class='eight'></span><span></span></div>").appendTo(ztopbarObj.ztbContainer);ztopbarObj._ztbLogo=zjQuery("<a>").attr("id","ztb-logo").appendTo(ztopbarObj.ztbContainer),ztopbarObj._initRebradingLogo(data.rebranding?data.rebranding.logo:"");var homePageLink=ztopbarObj._signInStatus?data.homePageLink:data.websiteHomePageLink;void 0!=homePageLink&&""!=homePageLink&&(ztopbarObj._ztbLogo.css("cursor","pointer"),"function"==typeof data.homePageLink?ztopbarObj._ztbLogo.click(function(){data.homePageLink()}):ztopbarObj._ztbLogo.attr("href",homePageLink));var ztbMenusCont=zjQuery("<div>").attr({id:"ztb-menu-container","class":"ztb-font-family "+(ztopbarObj._signInStatus?"":"ztb-user-signout")}).appendTo(ztopbarObj.ztbContainer);if(ztopbarObj.ztbOthersTypeCont=zjQuery("<div class='ztb-item-container'>").appendTo(ztbMenusCont),ztopbarObj.ztbPopoverTypeCont=zjQuery("<div class='ztb-item-container'>").appendTo(ztbMenusCont),ztopbarObj.ztbMenuTypeCont=zjQuery("<div class='ztb-item-container'>").appendTo(ztbMenusCont),ztopbarObj.ztbTextTypeCont=zjQuery("<div class='ztb-item-container'>").attr("id","ztb-textTypeCont")[ztopbarObj._signInStatus?"prependTo":"appendTo"](ztbMenusCont),ztopbarObj._signInStatus){var info=data.userInfo,photoClassName="",ztbProfileCont=zjQuery("<div>").attr("class","ztb-profile-container ztb-profile-image-pre").insertBefore(ztbMenusCont),imgSrc="",photoLabel="";info.photo?(imgSrc=info.photo,photoLabel=ztopbarObj._getString("change")):photoLabel=ztopbarObj._getString("upload"),ztopbarObj._rebrandingObj.storeAccess&&(photoClassName+=" ztb-mystore-enabled");var ztbProfile=zjQuery("<div>").attr({type:"profile",id:"ztb-profile","class":photoClassName+" ztb-font-family"}).appendTo(ztbProfileCont);ztbProfile.append("<div id='ztb-profile-header'></div><img id='ztb-profile-image' src='"+imgSrc+"'/>"),ztopbarObj.profileHeader=zjQuery("#ztb-profile-header"),ztopbarObj._rebrandingObj.myAccountAccess&&zjQuery("<a>").attr({href:ztopbarObj._accountsLink+"u/h#profile/home",target:"_blank",id:"ztb-change-photo"}).appendTo(ztbProfile).text(photoLabel),ztopbarObj.ztbProfileDetails=zjQuery("<div>").attr("id","ztb-accountInfo").appendTo(ztbProfile),ztopbarObj._setUsername(info.name),ztopbarObj._setEmailAddress(info.emailAddress);var profileHeaderElement="<p id='ztb-zoho-uid'><label>"+ztopbarObj._getString("userIdLabel")+": "+info.userId+"</label>";ztopbarObj._rebrandingObj.userIDDisplay&&info.userId&&(profileHeaderElement+="<span id='ztb-zoho-uid-info' class='ztb-icon-group'></span>"),profileHeaderElement+="</p><div id='ztb-mylinks'>",ztopbarObj._rebrandingObj.myAccountAccess&&(profileHeaderElement+="<a id='ztb-myaccount' href='"+ztopbarObj._accountsLink+"' target='_blank'>"+ztopbarObj._getString("myAccount")+"</a>"),ztopbarObj._storeStatus&&(profileHeaderElement+="<a class='ztb-mystore' href="+ztopbarObj._storeLink+" target='_blank'>"+ztopbarObj._getString("myStore")+"</a>");var _refreshHTML="";ztopbarObj._referralStatus&&(_refreshHTML+="<span class='ztb-myreferral'><a class='ztb-myreferral-link' href="+ztopbarObj._referralLink+" target='_blank'>"+ztopbarObj._getString("referyourfriend")+"</a>",ztopbarObj._referralIsNew&&(_refreshHTML+="<span id='ztb-myreferrals-count'>"+ztopbarObj._getString("new")+"</span>"),_refreshHTML+="</span>"),profileHeaderElement+="</div>",ztopbarObj.profileHeader.append(profileHeaderElement),signOutStr="<a class='ztb-anchor' id='ztb-signout'>"+ztopbarObj._getString("signout")+"</a>";var ztbSignOut=zjQuery("<span>").append(signOutStr).attr("class","ztb-signout").appendTo(ztopbarObj.ztbProfileDetails);ztopbarObj.ztbProfileDetails.append(_refreshHTML),ztbProfileCont.append("<img id='ztb-profile-image-pre' src='"+imgSrc+"'/>"),info.signOutURL&&("function"==typeof info.signOutURL?ztbSignOut.bind("click.signout",function(){info.signOutURL()}):zjQuery("#ztb-signout").attr("href",info.signOutURL.split("URL:")[1])),ztbProfile.data("imageHeight",ztbProfile.height());var initProfile=!1,profileMenuWidth=0;zjQuery(document).bind("mouseover.profile",function(){zjQuery("#ztb-profile").addClass("ztb-profile-ani-before"),profileMenuWidth=zjQuery("#ztb-profile").width(),zjQuery("#ztb-profile").removeClass("ztb-profile-ani-before"),zjQuery(document).unbind("mouseover.profile")}),zjQuery("#ztb-profile-image-pre").bind("click.profile",function(){ztbProfileCont.removeClass("ztb-profile-image-pre"),zjQuery("#ztb-profile-image-pre").hide().unbind("click.profile"),zjQuery("#ztb-profile").width(profileMenuWidth).addClass("ztb-profile-collapse"),ztbProfileCont.bind("click.profile",function(){initProfile||(ztopbarObj._initTooltipEvents(zjQuery("#ztb-user-id")),ztopbarObj._setUsername(ztopbarObj.data.userInfo.name),ztopbarObj._setEmailAddress(ztopbarObj.data.userInfo.emailAddress)),ztopbarObj._profileToggle(),initProfile||(initProfile=!0,ztopbarObj._setUsername(ztopbarObj.data.userInfo.name),ztopbarObj._setEmailAddress(ztopbarObj.data.userInfo.emailAddress))})})}else{delete data.userInfo,delete data.helpMenu,delete data.settings,delete data.portalInfo,delete data.subscription,delete data.notifications,delete data.messages;var signUpPageLink=data.signUpPageLink?data.signUpPageLink:ztopbarObj._websiteLink+"signup.html",signInPageLink=data.signInPageLink?data.signInPageLink:ztopbarObj._websiteLink+"login.html",ztbLoginCont=zjQuery("<div>").attr({type:"text","class":"ztb-text-type",id:"ztb-signin"}),ztbSignupCont=zjQuery("<div>").attr({type:"text","class":"ztb-text-type",id:"ztb-signup"});ztopbarObj.ztbTextTypeCont.prepend(ztbSignupCont),ztopbarObj.ztbTextTypeCont.prepend(ztbLoginCont),zjQuery("<a>").attr({href:signInPageLink,target:"_self"}).appendTo(ztbLoginCont).text(ztopbarObj._getString("signin")),zjQuery("<a>").attr({href:signUpPageLink,target:"_self"}).appendTo(ztbSignupCont).text(ztopbarObj._getString("signup"))}data.settings&&ztopbarObj.addItem("button"===data.settings.uitype?{uitype:"button",id:"settings",iconClass:"ztb-icon-group ztb-settings-icon",action:data.settings.action,title:ztopbarObj._getString("myPreferences"===data.settings.type?"myPreferences":"settings"),target:data.settings.target?data.settings.target:"_self",appendTo:ztopbarObj.ztbMenuTypeCont,removable:!1}:{uitype:"menu",id:"settings",title:ztopbarObj._getString("settings"),menu:data.settings.menu,iconClass:"ztb-icon-group ztb-settings-icon",appendTo:ztopbarObj.ztbMenuTypeCont,removable:!1}),data.helpMenu&&ztopbarObj.addItem({uitype:"menu",id:"help",title:ztopbarObj._getString("help"),menu:data.helpMenu,iconClass:"ztb-icon-group ztb-help-icon",appendTo:ztopbarObj.ztbMenuTypeCont,removable:!1}),"object"==typeof data.messages&&ztopbarObj.addItem({uitype:"popover",id:"messages",title:ztopbarObj._getString("messages"),popover:{title:ztopbarObj._getString("messages"),html:data.messages.html,count:data.messages.count},iconClass:"ztb-icon-group ztb-messages-icon",appendTo:ztopbarObj.ztbPopoverTypeCont,removable:!1}),"object"==typeof data.notifications&&ztopbarObj.addItem({uitype:"popover",id:"notifications",title:ztopbarObj._getString("notifications"),popover:{title:ztopbarObj._getString("notifications"),html:data.notifications.html,count:data.notifications.count},iconClass:"ztb-icon-group ztb-notifications-icon",appendTo:ztopbarObj.ztbPopoverTypeCont,removable:!1});var subDetail=data.subscription;if(void 0!==subDetail&&subDetail.planType){ztopbarObj._trialUpgradeLink=subDetail.upgradeLink;var canTryOtherEditions=subDetail.canTryOtherEditions&&subDetail.tryOtherEditionsLink?!0:!1,manageSubscriptionLinkIsAdded=!1,settingArray=[],settingsObj=zjQuery("#ztb-settings");if("button"!==settingsObj.attr("type")){var menuObj=zjQuery("#ztb-settings-menu .ztb-content ul li").length;if(0===menuObj)if("free"===subDetail.planType)ztopbarObj._trialUpgradeLink&&settingArray.push({id:"ztb-upgrade",label:ztopbarObj._getString("upgrade"),URL:ztopbarObj._trialUpgradeLink,target:"_blank"});else if(void 0!==subDetail.manageSubscriptionLink)if(canTryOtherEditions)manageSubscriptionLinkIsAdded=!0,settingArray.push({id:"ztb-manageSubscription",label:ztopbarObj._getString("manageSubscription"),URL:subDetail.manageSubscriptionLink,target:"_blank"}),settingArray.push({id:"ztb-tryOtherEditions",label:ztopbarObj._getString("tryOtherEditions"),URL:subDetail.tryOtherEditionsLink,target:"_blank"});else{var ztbOtherEditions=zjQuery("<div>").attr({"class":"ztb-text-type",id:"ztb-subscriptionText",type:"text"}).appendTo(zjQuery("#ztb-textTypeCont"));zjQuery("<a>").attr({href:subDetail.manageSubscriptionLink,target:"_blank","class":"ztb-anchor"}).appendTo(ztbOtherEditions).text(ztopbarObj._getString("supscription")),settingsObj.hide()}else settingArray.push({id:"ztb-tryOtherEditions",label:ztopbarObj._getString("tryOtherEditions"),URL:subDetail.tryOtherEditionsLink,target:"_blank"});else("paid"===subDetail.planType&&subDetail.manageSubscriptionLink||"free"===subDetail.planType&&ztopbarObj._trialUpgradeLink)&&settingArray.push({id:"ztb-sep1",separator:!0}),"free"===subDetail.planType?ztopbarObj._trialUpgradeLink&&settingArray.push({id:"ztb-upgrade",label:ztopbarObj._getString("upgrade"),URL:ztopbarObj._trialUpgradeLink,target:"_blank"}):(void 0!==subDetail.manageSubscriptionLink&&(manageSubscriptionLinkIsAdded=!0,settingArray.push({id:"ztb-manageSubscription",label:ztopbarObj._getString("manageSubscription"),URL:subDetail.manageSubscriptionLink,target:"_blank"})),canTryOtherEditions&&settingArray.push({id:"ztb-tryOtherEditions",label:ztopbarObj._getString("tryOtherEditions"),URL:subDetail.tryOtherEditionsLink,target:"_blank"}))}if(canTryOtherEditions&&void 0===subDetail.trialInfo&&"free"===subDetail.planType){var link=zjQuery("<a>").attr("class","ztb-anchor"),ztbOtherEditionsFree=zjQuery("<div>").attr({type:"text","class":"ztb-text-type",id:"ztb-tryOtherEditions"});ztopbarObj.ztbTextTypeCont.prepend(ztbOtherEditionsFree),link.attr({href:subDetail.tryOtherEditionsLink,target:"_blank"}).appendTo(ztbOtherEditionsFree).text(ztopbarObj._getString("tryOtherEditions"))}settingArray.length&&(0===zjQuery("#ztb-settings-menu .ztb-content ul").length?ztopbarObj._createSettingOption(settingArray):ztopbarObj.addMenuItem(settingArray,"ztb-settings")),subDetail.trialInfo&&ztopbarObj.showTrialInfo(subDetail)}if(data.portalInfo){var portals=data.portalInfo.portals;if(portals&&1!==portals.length){portals.push({id:"ztb-portalsep1",separator:!0});var managePortalsLable=ztopbarObj._getString("managePortals");"mail"===ztopbarObj.product&&data.portalInfo.managePortalsLabel&&(managePortalsLable=data.portalInfo.managePortalsLabel),portals.push({id:"ztb-managePortals",label:managePortalsLable,action:"URL:"+data.portalInfo.managePortalsLink,target:"_blank"}),ztopbarObj.addItem({uitype:"menu",id:"portals",title:ztopbarObj._getString("portals"),menu:portals,textClass:"ztb-text-type",appendTo:ztopbarObj.ztbTextTypeCont})}}if(data.others)for(var i in data.others)ztopbarObj.addItem(data.others[i]);if(data.serviceInfo){var serviceUI=zjQuery("<div>").attr("id","ztb-service-info").html(data.serviceInfo).prependTo(ztbMenusCont);zjQuery("#ztb-tryOtherEditions")[0]||serviceUI.css("border-right-width","1px")}if(data.search){var ztbSearch=zjQuery("<div>").attr({id:"ztb-search","class":"ztb-font-family"}).appendTo(ztopbarObj.ztbContainer),ztbSearchFilter=zjQuery("<div>").attr({id:"ztb-search-filter","class":"ztb-icon-group"}).appendTo(ztbSearch);data.search.hasFilter&&ztbSearchFilter.addClass("ztb-filter-expand").append("<span class = 'ztb-icon-group ztb-search-dd'></span>"),ztbSearch.append("<input type = 'text' id = 'ztb-search-field' class='ztb-font-family' /><span id = 'ztb-search-action' ></span>");var searchField=zjQuery("#ztb-search-field");ztopbarObj._isPlaceholder=void 0===searchField[0].placeholder||null===searchField[0].placeholder,data.search.placeholder&&(ztopbarObj._isPlaceholder&&(searchField.before("<label id='ztb-search-placeholder'>"+data.search.placeholder+"</label>"),zjQuery("#ztb-search-placeholder").css("left",searchField.position().left-2)),ztopbarObj._changePlaceholder(data.search.placeholder)),searchField.bind("focus.ztb",function(){ztbSearch.addClass("ztb-search-focus"),zjQuery("#ztb-search-placeholder").css("display","none")}).bind("blur.ztb",function(){ztbSearch.removeClass("ztb-search-focus"),searchField.val()||zjQuery("#ztb-search-placeholder").css("display","block")})}if(data.placeHolderHTML){var ztbPlaceHolderCont=zjQuery("<div>").attr({id:"ztb-placeholder-container"}).appendTo(ztopbarObj.ztbContainer);ztbPlaceHolderCont.append(data.placeHolderHTML)}if(ztopbarObj._myApps=!1,"zoho"!==ztopbarObj.product){setTimeout(function(){_createSwitchToMenu()},2);var appsShortNameMap={zohocrm:"crm",zohochat:"chat",zohocampaigns:"campaigns",zohosites:"sites",zohosurvey:"survey",zohosupport:"support",zohoassist:"assist",livedesk:"salesiq",virtualoffice:"mail",zohomeeting:"meeting",zohopulse:"connect",zohocontactmanager:"contactmanager",zohopc:"docs",zohoprojects:"projects",zohobugtracker:"bugtracker",zohobooks:"books",zohoinvoice:"invoice",zohopeople:"people",zohorecruit:"recruit",zohocreator:"creator",zohosubscriptions:"subscriptions",zohoreports:"reports",zohovault:"vault",zohosocial:"social",zohowriter:"writer",zohosheet:"sheet",zohoshow:"show",zohoexpense:"expense",zohoshowtime:"showtime",zohoforms:"forms",zohocalendar:"calendar",zohoinventory:"inventory",zohowiki:"wiki",zohomotivator:"motivator",site24x7:"site24x7"}}else ztopbarObj._createTooltip();return zjQuery("#ztb-menu-container .ztb-item-container").bind("click.ztb",function(e){var targetEle=zjQuery(e.target);targetEle.is("div")||(targetEle=targetEle.parent()),ztopbarObj._toggle(targetEle)}),ztopbarObj._userIdTooltip(),ztopbarObj._onResize(),ztopbarObj}};zTopbar.prototype={_EVENTS:{ITEMONCLICK:"itemclick",TRIALCLOSE:"messagebannerclose",TRIALOPEN:"messagebanneropen",MENUCLOSE:"menuclose",MENUOPEN:"menuopen",POPOVERCLOSE:"popoverclose",POPOVEROPEN:"popoveropen",ONCLOSE:"close",ONOPEN:"open"},_widgetEventPrefix:"ztopbar",showEle:void 0,clickEle:void 0,ztooltip:void 0,userIdTooltip:void 0,_sepPos:0,_init:function(data){this._appProtocol=window.location.protocol;var domainArray=window.location.hostname.split(".");domainArray.length>2&&(domainArray.reverse().pop(),domainArray.reverse()),this._lastOpenedItem=void 0,this._documentEle=zjQuery(document),this._getString="object"!=typeof ztopbar.i18nKeys&&zjQuery.i18n?getI18NString:getString,this._appDomain=domainArray.join("."),this._ieClass="",(-1!==navigator.appVersion.indexOf("MSIE 7.")||-1!==navigator.appVersion.indexOf("MSIE 8."))&&(this._ieClass="ztb-ie-browser"),this._windowWidth=zjQuery(window).width(),this.product=data.product?data.product.split(" ").join("").toLowerCase():"",data.mode=data.underlineUI?data.underlineUI:data.mode,this._isEditor="editor"===data.mode||"writer"===this.product||"sheet"===this.product||"show"===this.product?!0:!1;var productName=this._isEditor?"docs":this.product;this._protocolScheme=this._appProtocol+"//",this._websiteLink=this._checkLink(data.zohoWebsiteLink),this._suiteList=["baihui","fuji","skydesk","medicalmine"],this._suite=ztopbar.suite.toLowerCase(),-1===zjQuery.inArray(this._suite,this._suiteList)&&(this._suite="zoho"),this._subServices=["zoho","accounts","contacts","chat"];var blogLink="",forumLink="",aboutUsLink="",zohoHomeLink="";"zoho"===this._suite&&(this._websiteLink=this._checkLink(this._websiteLink&&this._websiteLink.length?this._websiteLink:this._protocolScheme+"zoho.com/"),aboutUsLink=this._websiteLink+this.product,blogLink=this._protocolScheme+"blogs.zoho.com/category/"+productName,forumLink=this._protocolScheme+"forums.zoho.com/zoho-"+productName,-1!==zjQuery.inArray(this.product,this._subServices)&&(aboutUsLink=this._websiteLink,blogLink=this._protocolScheme+"blogs.zoho.com",forumLink=this._protocolScheme+"forums.zoho.com"),zohoHomeLink=this._protocolScheme+"home.zoho.com");var helpMenu=data.helpMenu?data.helpMenu:{};this._homeLink=this._checkLink(data.zohoHomeLink&&data.zohoHomeLink.length?data.zohoHomeLink:zohoHomeLink),this._blogsLink=this._checkLink(helpMenu.blogLink&&helpMenu.blogLink.length?helpMenu.blogLink:blogLink),this._forumsLink=this._checkLink(helpMenu.forumLink&&helpMenu.forumLink.length?helpMenu.forumLink:forumLink),this._accountsLink=this._checkLink(data.myAccountLink&&data.myAccountLink.length?data.myAccountLink:this._protocolScheme+"accounts.zoho.com"),this._storeLink=this._checkLink(data.myStoreLink&&data.myStoreLink.length?data.myStoreLink:this._protocolScheme+"store.zoho.com"),this._referralLink=this._checkLink(data.referralURL&&data.referralURL.length?data.referralURL:this._protocolScheme+"zoho.com/referrals"),this._aboutUsLink=this._checkLink(data.websiteHomePageLink&&data.websiteHomePageLink.length?data.websiteHomePageLink:aboutUsLink);var _rebrandingDefaults={logo:"",zohoAppsMenu:!0,myAccountAccess:!0,userIDDisplay:!0,hasUserReferrals:!1,forumAccess:!0,blogAccess:!0,hasUserReferralsNew:!0,websiteAccess:!0};this._rebrandingObj=zjQuery.extend({},_rebrandingDefaults,data.rebranding),this._zohoAppsMenu=ztopbar.isSwitchToMenuEnabled!==!1?this._rebrandingObj.zohoAppsMenu:!1,"zoho"===this.product&&(this._zohoAppsMenu=!1),"zoho"!==this._suite&&(this._rebrandingObj.userIDDisplay=!1,this._rebrandingObj.hasUserReferrals=!1),this._rebrandingObj.storeAccess=!1,this._referralStatus=this._rebrandingObj.hasUserReferrals?this._rebrandingObj.hasUserReferrals:!1,this._referralIsNew=this._rebrandingObj.hasUserReferralsNew?this._rebrandingObj.hasUserReferralsNew:!1},_checkLink:function(linkText){return linkText?(linkText=-1!==linkText.substring(linkText.length-2).lastIndexOf("/")?linkText:linkText+"/",-1!==linkText.substring(0,8).indexOf("//")?linkText:this._appProtocol+"//"+linkText):""},item:function(param){return"string"==typeof param&&(this.parentElement="ztb-"+param),this},addItem:function(param){if("object"==typeof param){var appendTo="",iconCls=param.iconClass?param.iconClass:"",tooltip=param.title?param.title:"",removable=void 0!==param.removable?param.removable:!0;if("menu"===param.uitype){var menuId=param.id;appendTo=param.appendTo?param.appendTo:this.ztbOthersTypeCont;var className=param.textClass?param.textClass:"ztb-menu-type",menuObj=zjQuery("<div>").attr({type:"menu",id:"ztb-"+menuId,"class":className,removable:removable}).data({values:param.menu,options:param,itemType:"menu"}).appendTo(appendTo);if(iconCls)zjQuery("<span>").attr("class","ztb-icons "+iconCls).appendTo(menuObj);else if("portals"===param.id){var labelText="";for(var k in param.menu)labelText=""===labelText&&param.menu[k].selected===!0?param.menu[k].label:labelText;labelText=labelText?labelText:param.menu[0].label,zjQuery("<a>").appendTo(menuObj).text(labelText)}tooltip&&menuObj.attr("ztooltip",tooltip).addClass("ztooltip"),this._createMenu(menuObj,param.menu)}else if("popover"===param.uitype){var popoverId=param.id;appendTo=param.appendTo?param.appendTo:this.ztbOthersTypeCont;var popoverObj=zjQuery("<div>").attr({type:"popover",id:"ztb-"+popoverId,"class":"ztb-popover-type",removable:removable}).data({options:param,itemType:"popover"}).appendTo(appendTo);param.popover&&(param.popover.title&&popoverObj.data({label:param.popover.title}),param.popover.html&&popoverObj.data({html:param.popover.html})),tooltip&&popoverObj.attr("ztooltip",tooltip).addClass("ztooltip"),iconCls&&zjQuery("<span>").attr("class","ztb-icons "+iconCls).appendTo(popoverObj),this._createPopover(popoverObj),param.popover&&param.popover.count&&this.item(popoverId).updateCount(param.popover.count)}else if("button"===param.uitype)this._createButton(param);else if("text"===param.uitype){var textObj=zjQuery("<div>").attr({type:"text",id:"ztb-"+param.id,"class":"ztb-text-type",removable:removable}).prependTo(zjQuery("#ztb-textTypeCont")),action=-1!==param.action.indexOf("URL:")?param.action.split("URL:")[1]:param.action;zjQuery("<a>").attr("href",action).appendTo(textObj).text(param.label),textObj.data({options:param,itemType:"text"})}this._initTooltipEvents()}return this},removeItem:function(id){if("string"==typeof id){var ele=void 0;ele=zjQuery(void 0!==zjQuery("#"+id).attr("type")&&void 0!==this.ztbContainer.find("#"+id)[0]?"#"+id:"#ztb-"+id),Boolean(ele.attr("removable"))&&(ele.remove(),zjQuery("#"+ele[0].id+"-"+ele.attr("type")).remove())}},_buildMyApps:function(){var myAppsTable,base=this,myAppsCont=zjQuery("#ztb-myapps"),allAppsCont=zjQuery("#ztb-all-apps"),myAppsListCont=zjQuery("<div>").attr("id","ztb-myapps-list").appendTo(myAppsCont),contCnt=0,selectedPage="",pagenationCnt=0,isMeetingDeleted=!1;this._myAppsData.meeting&&this._myAppsData.assist&&(isMeetingDeleted=!0,delete this._myAppsData.meeting);var myAppslist=this._myAppsData,inUseLabel=this._getString("inuse");for(app in myAppslist){var appInfo=myAppslist[app];appInfo&&appInfo.isMyApp&&(allAppsCont.find(".zicon-apps-"+app).parent().addClass("ztb-opted").append("<div class='ztb-opted-apps ztb-icon-group ztooltip' ztooltip='"+inUseLabel+"'></div>"),contCnt%12===0&&(myAppsTable=zjQuery("<div>").attr({"class":"ztb-myapps-cont",id:"ztb-myapps-cont"+contCnt/12}).appendTo(myAppsListCont),pagenationCnt+=1),appHTML='<div class="ztb-myapps-info"><a class="ztb-myapps-icon" data-zapp="'+app+'" href="'+appInfo.url+'" target="_blank"><div class="zicon-apps-48 zicon-apps-'+app+'"></div></a><a data-zapp="'+app+'" href="'+appInfo.url+'" target="_blank"><span class="ztb-myapps-label">'+this._getString(appInfo.app_name)+"</span></a></div>",myAppsTable.append(appHTML),contCnt+=1)}isMeetingDeleted&&allAppsCont.find(".zicon-apps-meeting").parent().addClass("ztb-opted").append("<div class='ztb-opted-apps ztb-icon-group ztooltip' ztooltip='"+inUseLabel+"'></div>");var _homeLink="";if(void 0!==this._homeLink&&this._homeLink.length&&(_homeLink="<div id='ztb-gotohome'><span class='ztb-icon-group ztb-home-icon'></span><span class='ztb-home-text'>"+this._getString("zohoHome")+"</span></div>"),zjQuery("<div>").attr("id","ztb-myapps-nav").insertAfter(myAppsCont).append(_homeLink+"<div id='ztb-goto-allapps'><span class='ztb-icon-group ztab-allapps-icon'></span><span class='ztab-allapps-text'>"+this._getString("allAppsLabel")+"</span></div><div id='ztb-slide-window'></div>"),pagenationCnt>1){var pageNatnNavDivs="";for(i=0;pagenationCnt>i;i++)pageNatnNavDivs+=0===i?"<div id='ztb-pageNav-"+i+"' class='ztb-page-navigation ztb-page-selected'></div>":"<div id='ztb-pageNav-"+i+"' class='ztb-page-navigation'></div>";zjQuery("#ztb-slide-window").append(pageNatnNavDivs),selectedPage=zjQuery("#ztb-slide-window .ztb-page-selected");var leftCont=zjQuery("<div>").attr({"class":"ztb-myapps-arrow-cont ztb-disable",id:"ztb-myapps-arrow-left"}).appendTo(myAppsCont).bind("click.nav",function(){base._ArrowNavigationAction(this,selectedPage)}),rightCont=zjQuery("<div>").attr({"class":"ztb-myapps-arrow-cont",id:"ztb-myapps-arrow-right"}).appendTo(myAppsCont).bind("click.nav",function(){base._ArrowNavigationAction(this,selectedPage)});zjQuery("<div>").attr("class","ztb-myapps-next ztb-myapps-side-navbar ztb-icon-group").appendTo(rightCont),zjQuery("<div>").attr("class","ztb-myapps-prev ztb-myapps-side-navbar ztb-icon-group").appendTo(leftCont)}zjQuery("#ztb-slide-window .ztb-page-navigation").bind("click.pageNav",function(){selectedPage.removeClass("ztb-page-selected").animate({left:-zjQuery(this).width()},200),selectedPage=zjQuery(this).addClass("ztb-page-selected"),base._changeSlidePos(selectedPage)}),zjQuery("#ztb-goto-allapps").click(function(){zjQuery("#ztb-all-apps").css({"margin-top":0,opacity:1}),zjQuery("#ztb-goto-allapps").hide(),zjQuery("#ztb-goto-myapps").show(),zjQuery("#ztb-slide-window").css("display","none"),myAppsCont.css("opacity",0)}),myAppsListCont.find("a").bind("click.apps",function(e){base._closeOpenedItems();var clickedAppName=zjQuery(this).data("zapp");base.data.product===clickedAppName?"writer"===clickedAppName||"sheet"===clickedAppName||"show"===clickedAppName?window.open(zjQuery(this)[0].href,"_blank"):location.reload():window.open(zjQuery(this)[0].href,"_blank"),e.preventDefault(),e.stopPropagation()}).bind("mouseover.apps",function(){zjQuery(this).parent().addClass("ztb-myapps-hover")}).bind("mouseout.apps",function(){zjQuery(this).parent().removeClass("ztb-myapps-hover")}),zjQuery("#ztb-gotohome").bind("click.eachMyapps",function(){base._closeOpenedItems(),window.open(base._homeLink,"_blank")})},_ArrowNavigationAction:function(ele,selectedPage){-1===ele.className.indexOf("ztb-disable")&&-1!==ele.id.indexOf("ztb-myapps-arrow-right")?zjQuery(selectedPage.next()).trigger("click.pageNav"):-1===ele.className.indexOf("ztb-disable")&&-1!==ele.id.indexOf("ztb-myapps-arrow-left")&&zjQuery(selectedPage.prev()).trigger("click.pageNav")},_changeSlidePos:function(selectedPage){if(selectedPage[0]){var rightNavBar=zjQuery("#ztb-myapps-arrow-right"),leftNavBar=zjQuery("#ztb-myapps-arrow-left"),splitedArr=selectedPage[0].id.split("-"),appsCont=zjQuery("#ztb-myapps-list"),idCnt=parseInt(splitedArr[splitedArr.length-1]),childCnt=idCnt>0?idCnt-1:idCnt;0===idCnt?(leftNavBar.addClass("ztb-disable"),rightNavBar.removeClass("ztb-disable")):idCnt===selectedPage.parent().children().length-1?(rightNavBar.addClass("ztb-disable"),leftNavBar.removeClass("ztb-disable")):(leftNavBar.removeClass("ztb-disable"),rightNavBar.removeClass("ztb-disable")),appsCont.css("margin-left",-(zjQuery(appsCont.children()[childCnt]).outerWidth()*idCnt))}},_createButton:function(ele){var removable=void 0!==ele.removable?ele.removable:!0,ID=void 0!==ele.id?ele.id:"",iconCls=ele.iconClass?ele.iconClass:"";ele.target=ele.target?ele.target:"";var appndTo=void 0!==ele.appendTo?ele.appendTo:this.ztbOthersTypeCont,buttonObj=zjQuery("<div>").attr({type:"button",id:"ztb-"+ID,"class":"ztb-button-type",removable:removable}).data({options:ele,itemType:"button"}).appendTo(appndTo);ele.title&&buttonObj.attr("ztooltip",ele.title).addClass("ztooltip"),zjQuery("<span>").attr("class","ztb-icons "+iconCls).appendTo(buttonObj)},_triggerAnAction:function(action,tgt){"string"==typeof action&&-1!==action.indexOf("URL:")||"string"==typeof action&&-1!==action.indexOf("javascript:")?-1!==action.indexOf("URL:")?window.open(action.split("URL:")[1],tgt):-1!==action.indexOf("javascript:")&&(window.location.href=action):"function"==typeof action&&action()},_toggle:function(clickEle,showEle){this.clickEle=clickEle;var dataObj=this.clickEle.data(),_lastOpenedItem=this._lastOpenedItem;if(void 0!==this._lastOpenedItem&&this._closeOpenedItems(),!(void 0===dataObj.itemType||_lastOpenedItem&&_lastOpenedItem[0]===clickEle[0])){if(this.clickEle&&dataObj&&dataObj.options&&"button"===dataObj.options.uitype)return void this._triggerAnAction(dataObj.options.action,dataObj.options.target);this._lastOpenedItem=this.clickEle,this.showEle=showEle?showEle:zjQuery("#"+clickEle[0].id+"-"+this.clickEle.attr("type")),this._lastShownEle=this.showEle;var eleId=this.clickEle[0].id;if(this._triggerEvent(this._EVENTS.ITEMONCLICK),eleId&&-1!=eleId.indexOf("ztb-switch-menu")){var top="fixed"==this.data.position?clickEle.offset().top-zjQuery(window).scrollTop()+this.ztbContainer.height():clickEle.offset().top+this.ztbContainer.height();this.showEle.css("top",top),this.mainCont.hasClass("ztb-fixed")&&showEle.addClass("ztb-fixed")}this.clickEle.addClass("ztb-active"),this.showEle.removeClass("ztb-collapse").addClass("ztb-expand"),("popover"===this.clickEle.attr("type")||"menu"===this.clickEle.attr("type"))&&("popover"===this.clickEle.attr("type")?this._triggerEvent(this._EVENTS.POPOVEROPEN,dataObj.options):"menu"===this.clickEle.attr("type")&&this._triggerEvent(this._EVENTS.MENUOPEN,dataObj.options),this._setPosition(clickEle));var base=this;this._documentEle.unbind("mouseup.document").bind("mouseup.document",function(e){void 0!==base._lastShownEle&&void 0!==base._lastOpenedItem&&zjQuery(e.target).closest("#"+base._lastShownEle[0].id)[0]!==base._lastShownEle[0]&&zjQuery(e.target).closest("#"+base._lastOpenedItem[0].id)[0]!==base._lastOpenedItem[0]&&base._closeOpenedItems()})}},_onResize:function(){this._setDropdownHeight();var base=this,onReTime=void 0,windowObj=zjQuery(window);windowObj.bind("resize.topbar",function(){base._windowWidth=windowObj.width(),clearTimeout(onReTime),onReTime=setTimeout(function(){base._closeOpenedItems(!0)},30)}).bind("keydown.topbar",function(orgEvent){27===orgEvent.keyCode&&(base._closeOpenedItems(),zjQuery("#ztb-profile").hasClass("ztb-expand")&&base._documentEle.trigger("mouseup.doc"))})},_closeOpenedItems:function(fromResize){if(this._lastOpenedItem){var dataObj=this._lastOpenedItem.data();this._lastOpenedItem.removeClass("ztb-active"),this._lastShownEle&&this._lastShownEle.removeClass("ztb-expand").addClass("ztb-collapse"),"popover"===this._lastOpenedItem.attr("type")?this._triggerEvent(this._EVENTS.POPOVERCLOSE,dataObj.options):"menu"===this._lastOpenedItem.attr("type")&&this._triggerEvent(this._EVENTS.MENUCLOSE,dataObj.options),this._lastOpenedItem=void 0,this._lastShownEle=void 0}fromResize&&this._setDropdownHeight(),this._documentEle.unbind("mouseup.document")},_setDropdownHeight:function(){if("fixed"===this.data.position){var menuEle,index,menuObjects=zjQuery(".ztb-dropdown");for(index=0;index<menuObjects.length;index++)menuEle=zjQuery(menuObjects[index]),menuEle.find(".ztb-content").css("max-height",.6*zjQuery(window).height())}},_createPopover:function(clickEle){this.clickEle=clickEle;var popoverEle=zjQuery("#"+this.clickEle[0].id+"-popover");if(void 0!==popoverEle[0])this.showEle=popoverEle;else{var label=clickEle.data("label")?clickEle.data("label"):this.clickEle.attr("ztooltip"),innerHTML=clickEle.data("html")?clickEle.data("html"):"",popover=zjQuery("<div>").attr({id:this.clickEle[0].id+"-popover","class":"ztb-popover ztb-font-family ztb-collapse"}).insertAfter(this.mainCont);zjQuery("<div>").attr("class","ztb-arrow "+this._ieClass).appendTo(popover);var topCont=zjQuery("<div>").attr("class","ztb-label").appendTo(popover);zjQuery("<label>").appendTo(topCont).attr("class","ztb-popover-label").text(label),zjQuery("<span>").attr({ztooltip:this._getString("close"),"class":"ztb-popoverClose ztooltip ztb-icon-group"}).appendTo(topCont),zjQuery("<div>").appendTo(popover).attr({id:this.clickEle[0].id.split("ztb-")[1],"class":"ztb-popover-content"}).html(innerHTML),this.showEle=popover,this.mainCont.hasClass("ztb-fixed")&&popover.addClass("ztb-fixed")}var base=this;zjQuery("#"+this.clickEle[0].id+"-popover .ztb-popoverClose").bind("click.close",function(){base._closeOpenedItems()})},_createMenu:function(clickEle,val){this.clickEle=clickEle;var menuEle=zjQuery("#"+this.clickEle[0].id+"-"+clickEle.attr("type"));if("ztb-help"===clickEle[0].id?val=this._createMenuFormat("ztb-help",val):"ztb-settings"===clickEle[0].id&&(val=this._createMenuFormat("ztb-settings",val)),this.clickEle=clickEle,void 0!==menuEle[0])this.showEle=menuEle;else{var uitype=clickEle.data("uitype")?"ztb-"+clickEle.data("uitype"):"",dd=zjQuery("<div>").attr({id:this.clickEle[0].id+"-menu","class":"ztb-dropdown ztb-font-family ztb-collapse "+uitype}).insertAfter(this.mainCont);zjQuery("<div>").attr("class","ztb-arrow "+this._ieClass).appendTo(dd);var content=zjQuery("<div>").attr("class","ztb-content").appendTo(dd);zjQuery("<ul>").attr("class","ztb-ul").appendTo(content),this.addMenuItem(val),this.mainCont.hasClass("ztb-fixed")&&dd.addClass("ztb-fixed"),this.showEle=dd}},_createSettingOption:function(menuObj){this.ztbSettings.attr({type:"menu",ztooltip:this._getString("settings"),id:"ztb-settings","class":"ztb-menu-type ztooltip"}).data({values:menuObj}).prependTo(this.ztbMenuTypeCont),zjQuery("<span>").attr("class","ztb-icons ztb-icon-group").appendTo(this.ztbSettings),this._createMenu(this.ztbSettings,menuObj)},_createMenuFormat:function(optionID,datas){var menu=[];if("ztb-help"===optionID){var helpAdded=!1,helpLabels={helpLink:this._getString("help"),helpCenterLink:this._getString("helpCenter"),FAQLink:this._getString("faq"),gettingStarted:this._getString("gettingStarted"),tour:this._getString("takeATour")},supportLabels=[this._getString("forums"),this._getString("support"),this._getString("feedback"),this._getString("liveChat")];if(datas.helpLinks){var helpLinks=datas.helpLinks,menusLength=0;for(var link in helpLinks){menusLength+=1;var menuItem={id:link,label:helpLabels[link]};void 0!==helpLinks[link]&&""!==helpLinks[link]&&("string"==typeof helpLinks[link]?-1!==helpLinks[link].indexOf("javascript:")?menuItem.action=helpLinks[link]:(menuItem.action="URL:"+helpLinks[link],menuItem.target="_blank"):"function"==typeof helpLinks[link]&&(menuItem.action=helpLinks[link])),"helpLink"!==link&&"helpCenterLink"!==link||helpAdded?"FAQLink"===link?(menuItem.id="ztb-"+menuItem.id,menu.splice(1,0,menuItem)):"gettingStarted"===link?(menuItem.id="ztb-"+menuItem.id,menu.splice(2,0,menuItem)):"tour"===link&&(menuItem.id="ztb-"+menuItem.id,menu.splice(3,0,menuItem)):(helpAdded=!0,menuItem.id="ztb-"+menuItem.id,menu.splice(0,0,menuItem))}if(void 0!==helpLinks.others)for(i=0;i<helpLinks.others.length;i++)menu.push(helpLinks.others[i]);menusLength>1&&menu.push({id:"ztb-helpsep1",separator:!0})}var otherInfoSepatator=!1;if(void 0!==datas.otherInfo)for(i=0;i<datas.otherInfo.length;i++)menu.push(datas.otherInfo[i]),otherInfoSepatator=!0;if(this._rebrandingObj.websiteAccess&&void 0!==this._aboutUsLink&&this._aboutUsLink.length){var aboutUsI18N="zoho"!==this._suite?ztopbar.suite:this._getString("zoho"),aboutUsLabel=this._getString("about")+" "+aboutUsI18N+" "+this._getString(this.product);zjQuery.inArray(this.product,this._subServices)||(aboutUsLabel=this._getString("about")+" "+this._getString("zoho")),otherInfoSepatator=!0,menu.push({id:"ztb-about",label:aboutUsLabel,action:"URL:"+this._aboutUsLink,target:"_blank"})}this._rebrandingObj.blogAccess&&void 0!==this._blogsLink&&this._blogsLink.length&&(otherInfoSepatator=!0,menu.push({id:"ztb-blogs",label:this._getString("blogs"),action:"URL:"+this._blogsLink,target:"_blank"})),otherInfoSepatator&&(this._rebrandingObj.forumAccess&&void 0!==this._forumsLink&&this._forumsLink.length||void 0!==datas.supportLink||void 0!==datas.feedback||void 0!==datas.liveChat)&&menu.push({id:"ztb-helpsep2",separator:!0}),this._rebrandingObj.forumAccess&&void 0!==this._forumsLink&&this._forumsLink.length&&menu.push({id:"ztb-forums",label:supportLabels[0],action:"URL:"+this._forumsLink,target:"_blank"}),void 0!==datas.supportLink?menu.push({id:"ztb-support",label:supportLabels[1],action:datas.supportLink,target:"_blank"}):void 0!==datas.feedback&&menu.push({id:"ztb-feedback",label:supportLabels[2],action:datas.feedback,target:"_blank"}),void 0!==datas.liveChat&&menu.push({id:"ztb-liveChat",label:supportLabels[3],action:datas.liveChat,target:"_blank"})}else if("ztb-settings"===optionID){for(var others=!1,label="",settingsLabel=String(this._getString("settings")).toLowerCase(),myPreferencesLabel=String(this._getString("myPreferences")).toLowerCase(),adminPanelLabel=String(this._getString("adminPanel")).toLowerCase(),i=0;i<datas.length;i++)label=datas[i].label?datas[i].label.toLowerCase():"","general"===datas[i].type&&(menu.splice(0,0,{id:"ztb-settings",label:this._getString("settings"),action:datas[i].action,target:"_blank"}),this._sepPos++),"myPreferences"===datas[i].type&&(menu.splice(1,0,{id:"ztb-myPreferences",label:this._getString("myPreferences"),action:datas[i].action,target:"_blank"}),this._sepPos++),"adminPanel"===datas[i].type?(menu.splice(2,0,{id:"ztb-adminPanel",label:this._getString("adminPanel"),action:datas[i].action,target:"_blank"}),this._sepPos++):(label||datas[i].separator)&&label!==settingsLabel&&label!==myPreferencesLabel&&label!==adminPanelLabel&&(menu.push(datas[i]),others=!0);0!==this._sepPos&&others&&menu.splice(this._sepPos,0,{id:"ztb-settingsSep1",separator:!0})}return menu},_setPosition:function(clickEle){this.clickEle=clickEle;var docWidth=this._windowWidth-40,itemArrow=zjQuery(this.showEle[0].childNodes[0]),clickOffset=clickEle.offset(),showEleWidth=this.showEle.width(),heightWithBorder=this.ztbContainer.outerHeight(),topPos="fixed"==this.data.position?clickOffset.top-zjQuery(window).scrollTop()+heightWithBorder:clickOffset.top+heightWithBorder;this.showEle.css({left:clickOffset.left+clickEle.outerWidth()/2-this.showEle.outerWidth()/2,top:topPos});var showOffset=this.showEle.offset();if(itemArrow.css("left",(showEleWidth-16)/2),showOffset.left+showEleWidth>this._windowWidth){var itemLeft=(showOffset.left+this.showEle.width()-docWidth,this.clickEle.offset().left+this.clickEle.outerWidth(!0)-this.showEle.outerWidth(!0));this.showEle.css("left",itemLeft),itemArrow.css("left",this.showEle.outerWidth(!0)-(itemArrow.outerWidth()/2+this.clickEle.outerWidth(!0)/2)-1)}},addMenuItem:function(menuObj,clickEle){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:clickEle?clickEle:this.clickEle[0].id,elementObj=zjQuery("#"+optionID);if("menu"===elementObj.attr("type")&&menuObj){menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],!this.data.settings||"menu"!==this.data.settings.uitype&&this.data.settings.uitype||zjQuery("#ztb-settings:visible")[0]||"ztb-settings"!==optionID||(zjQuery("#ztb-subscriptionText").remove(),zjQuery("#ztb-settings").show(),menuObj.splice(0,0,{separator:!0,id:"ztb-subs1"}),menuObj.splice(1,0,{id:"ztb-manageSubscription",label:this._getString("manageSubscription"),URL:this.data.subscription.manageSubscriptionLink,target:"_blank"}));var Obj=zjQuery("#"+optionID+"-menu > .ztb-content > .ztb-ul");for(i=0;i<menuObj.length;i++){var itemObj=menuObj[i],anchr=void 0,selected=itemObj.selected?"ztb-selected":"",id=itemObj.id?itemObj.id:"",li=zjQuery("<li>").attr({id:id,"class":selected});if(id&&!zjQuery("#"+id,Obj)[0]){var iconClass=itemObj.iconClass?itemObj.iconClass+" ztb-menu-icon ":"",labl=itemObj.label?itemObj.label:"",lnk=itemObj.URL?itemObj.URL:"",targt=itemObj.target?itemObj.target:"",manageSubs=zjQuery("#manageSubscription"),existsEle=itemObj.position?Obj[0].childNodes[itemObj.position]:void 0;if(itemObj.separator)li.addClass("ztb-seperator");else{anchr=zjQuery("<a>").text(labl).appendTo(li).attr({href:lnk,target:targt}).data({menuItem:itemObj});var span=zjQuery("<span>").attr("class",iconClass?iconClass:"");anchr.prepend(span)}if(existsEle)li.insertBefore(existsEle);else if(void 0!==manageSubs[0]&&"ztb-settings"===optionID&&"tryOtherEditions"!==id){var appndTo=manageSubs.prev()[0]?manageSubs.prev():manageSubs;"ztb-settings"===optionID&&this._sepPos&&!zjQuery("#ztb-settingsSep1")[0]&&zjQuery("<li>").attr({id:"ztb-settingsSep1","class":"ztb-seperator"}).insertBefore(appndTo),li.insertBefore(appndTo)}else existsEle||(0===this._sepPos||"ztb-settings"!==optionID||this._sepPos!==Obj.find("li").length||zjQuery("#ztb-settingsSep1")[0]||this._getString(itemObj.id)||itemObj.separator||zjQuery("<li>").attr({id:"ztb-settingsSep1","class":"ztb-seperator"}).appendTo(Obj),li.appendTo(Obj));if(itemObj.action){var act=itemObj.action;"string"==typeof act?-1!==act.indexOf("URL:")?anchr.attr("href",act.split("URL:")[1]):-1!==act.indexOf("javascript:")?(anchr.attr("href",act),anchr.removeAttr("target")):-1!==act.indexOf("mailto:")&&(anchr.attr("href",act),anchr.removeAttr("target")):"function"==typeof act&&(anchr.removeAttr("target").removeAttr("href"),this._actionBind(anchr))}else!anchr||""!==lnk&&void 0!==lnk||(anchr.removeAttr("href"),anchr.removeAttr("target"))}}var base=this;return zjQuery(".ztb-dropdown li").unbind("click.menuItem").bind("click.menuItem",function(){base._closeOpenedItems(),zjQuery(this).closest("#ztb-portals-menu")[0]&&"ztb-managePortals"!=this.id&&zjQuery("#ztb-portals").find("a").text(zjQuery(this).find("a").text())}),this._refreshMenu(optionID),this}},hideMenuItem:function(menuObj){this._hideMenuItem(menuObj,!1)},showMenuItem:function(menuObj){this._hideMenuItem(menuObj,!0)},_hideMenuItem:function(menuObj,status){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;if("menu"===zjQuery("#"+optionID).attr("type")){for(menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],i=0;i<menuObj.length;i++){var selectedDiv=zjQuery("#"+menuObj[i],"#"+optionID+"-menu");"ztb-seperator"!==selectedDiv.prev().attr("class")||"ztb-seperator"!==selectedDiv.next().attr("class")&&selectedDiv.next()[0]||selectedDiv.prev()[status?show:hide](),selectedDiv[status?"show":"hide"]()}return this._refreshMenu(optionID),this}},removeMenuItem:function(menuObj){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;if("menu"===zjQuery("#"+optionID).attr("type")){for(menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],i=0;i<menuObj.length;i++){var selectedDiv=zjQuery("#"+menuObj[i],"#"+optionID+"-menu");"ztb-seperator"!==selectedDiv.prev().attr("class")||"ztb-seperator"!==selectedDiv.next().attr("class")&&selectedDiv.next()[0]||selectedDiv.prev().remove(),selectedDiv.remove()}return this._refreshMenu(optionID),this}},updateMenuItem:function(menuObj){var optionID="menu"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;if("menu"===zjQuery("#"+optionID).attr("type")){for(menuObj=zjQuery.isArray(menuObj)?menuObj:[menuObj],i=0;i<menuObj.length;i++){var itemObj=menuObj[i],menuItem=zjQuery("#"+itemObj.id,"#"+optionID+"-menu").find("a");if(menuItem){menuItem.data("menuItem",zjQuery.extend({},menuItem.data("menuItem"),itemObj));var menuIcon=menuItem.find("span");itemObj.label&&(menuItem.text(itemObj.label),menuItem.prepend(menuIcon));var attrObj={};if(itemObj.URL&&(attrObj.href=itemObj.URL),itemObj.target&&(attrObj.target=itemObj.target),void 0!==itemObj.iconClass&&(""===itemObj.iconClass?menuIcon.removeAttr("class"):menuIcon.attr("class",itemObj.iconClass+" ztb-menu-icon ")),itemObj.action){menuItem.unbind("click.ztb");var act=itemObj.action;"string"==typeof act?-1!==act.indexOf("URL:")?attrObj.href=act.split("URL:")[1]:-1!==act.indexOf("javascript:")&&(menuItem.removeAttr("target"),attrObj.href=act):"function"==typeof act&&(menuItem.removeAttr("target"),this._actionBind(menuItem))}menuItem.attr(attrObj)}}return this._refreshMenu(optionID),this}},_actionBind:function(menuItem){menuItem.bind("click.ztb",function(e){var itemAction=zjQuery(this).data("menuItem").action;itemAction&&itemAction(),e.preventDefault()})},updateCount:function(count){var optionID="popover"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id,selElement=zjQuery("#"+optionID);if("popover"===selElement.attr("type"))if(count=parseInt(count),count>0){var countLeft,beforeTooltip=selElement.attr("ztooltip")?selElement.attr("ztooltip"):"";count>99?(countLeft=0,selElement.attr("ztooltip",beforeTooltip+"  ("+count+")"),count="99+"):(countLeft=3,-1!==beforeTooltip.indexOf("(")&&selElement.attr("ztooltip",beforeTooltip.split("(")[0])),setTimeout(function(){var notifyElement=zjQuery("#"+optionID+"-count");notifyElement.length||(notifyElement=zjQuery("<span>").appendTo(selElement).attr({id:optionID+"-count","class":"ztb-notification-alert"})),zjQuery("#"+optionID+"-count").removeClass("ztb-collapse").addClass("ztb-animate"),notifyElement.text(count)},1e3),setTimeout(function(){zjQuery("#"+optionID+"-count").removeClass("ztb-animate")},1700)}else zjQuery("#"+optionID+"-count").addClass("ztb-collapse").removeClass("ztb-animate")},_initRebradingLogo:function(rebrandingLogoSrc){if(this._displayLogo){var ztbLogoSrc="";if(0!==this._ztbLogo.children().length&&this._ztbLogo.children().remove(),rebrandingLogoSrc){var ztbLogoSrc=zjQuery("<img>").attr({src:rebrandingLogoSrc,id:"ztb-logo-rebrand"}).appendTo(this._ztbLogo);ztbLogoSrc.load(function(){ztbLogoSrc.css({"margin-top":Math.ceil(ztbLogoSrc.height()>34?3:(39-ztbLogoSrc.height())/2)})})}else zjQuery("<span>").attr("class","zlogos-22 zlogos-"+this.product).appendTo(this._ztbLogo)}},_changePlaceholder:function(text){return text?void(this._isPlaceholder?zjQuery("#ztb-search-placeholder").text(text):zjQuery("#ztb-search-field").attr("placeholder",text)):this._isPlaceholder?zjQuery("#ztb-search-placeholder").text():zjQuery("#ztb-search-field").attr("placeholder")},_changePortal:function(portalID){if(portalID){var _selectedEle=zjQuery("#"+portalID);_selectedEle&&_selectedEle.closest("#ztb-portals-menu")[0]&&_selectedEle.trigger("click")}},_changeUserInfo:function(userInfo,value){if("object"==typeof userInfo)this.data.userInfo=zjQuery.extend({},this.data.userInfo,userInfo),userInfo.name&&this._setUsername(userInfo.name),userInfo.emailAddress&&this._setEmailAddress(userInfo.emailAddress),userInfo.photo&&this._changeUserPhoto(userInfo.photo),this.data.userInfo=zjQuery.extend({},this.data.userInfo,userInfo);else if("string"==typeof userInfo){if(!value)return this.data.userInfo[userInfo];"name"==userInfo?this._setUsername(value):"emailAddress"==userInfo?this._setEmailAddress(value):"photo"==userInfo&&this._changeUserPhoto(value),this.data.userInfo[userInfo]=value}},_setUsername:function(name){if(name){var _usernameEle=zjQuery("#ztb-user-name");0===_usernameEle.length&&(_usernameEle=zjQuery("<p>").attr("id","ztb-user-name").prependTo(this.profileHeader)),_usernameEle.text(name);var temDiv=zjQuery("<p>").css("font-size",15).attr({id:"ztb-temp-span","class":"ztb-font-family"}).appendTo(zjQuery("body")).text(name),_containerWidth=_usernameEle.width();temDiv.width()>_containerWidth?_usernameEle.attr({ztooltip:name,"class":"ztooltip"}):_usernameEle.removeClass("ztooltip").removeAttr("ztooltip"),temDiv.remove()}},_setEmailAddress:function(emailAddress){if(emailAddress){var _emailEle=zjQuery("#ztb-user-id");0===_emailEle.length&&(_emailEle=zjQuery("<p>").attr("id","ztb-user-id").insertAfter(zjQuery("#ztb-user-name"))),_emailEle.text(emailAddress);var _containerWidth=_emailEle.width(),temDiv=zjQuery("<div>").css("font-size",13).attr({id:"ztb-temp-span","class":"ztb-font-family"}).appendTo(zjQuery("body")).text(emailAddress);temDiv.width()>_containerWidth?_emailEle.attr({ztooltip:emailAddress,"class":"ztooltip"}):_emailEle.removeClass("ztooltip").removeAttr("ztooltip"),temDiv.remove()}},_changeUserPhoto:function(newPhoto){if(newPhoto){zjQuery("#ztb-profile-image-pre").attr("src",newPhoto),zjQuery("#ztb-profile-image").attr("src",newPhoto);var photoLabel=this._getString("change");zjQuery("#ztb-profile-image").next().text(photoLabel)}},_showClearText:function(){zjQuery("#ztb-search-action").addClass("ztb-search-clear ztb-icon-group"),zjQuery("#ztb-search-action").bind("click.clearText",function(){zjQuery("#ztb-search-field").val("")})},_hideClearText:function(){zjQuery("#ztb-search-action").removeClass("ztb-search-clear ztb-icon-group")},innerHTML:function(htmlString){var optionID="popover"===zjQuery("#"+this.parentElement).attr("type")?this.parentElement:this.clickEle[0].id;"popover"===zjQuery("#"+optionID).attr("type")&&zjQuery("#"+optionID+"-popover .ztb-popover-content").append(htmlString)},showTrialInfo:function(subDetail){var trialInfo=subDetail&&subDetail.trialInfo?subDetail.trialInfo:subDetail,base=this;if(trialInfo&&base._trialUpgradeLink){var notifyBar=zjQuery("#ztb-notify-container");if(!notifyBar.length){notifyBar=zjQuery("<div>").attr({"class":"ztb-notify-container ztb-font-family",id:"ztb-notify-container"}),this.mainCont.prepend(notifyBar);var center=zjQuery("<center>").appendTo(notifyBar);zjQuery("<span>").appendTo(center),zjQuery("<button>").addClass("ztb-font-family").appendTo(center),zjQuery("<font>").attr({id:"ztb-will-do-later","class":"ztb-collapse"}).appendTo(center).text(this._getString("willDoLater"));var notifybarClose=zjQuery("<div>").attr({id:"ztb-notifybar-close","class":"ztb-icon-group ztooltip",ztooltip:this._getString("close")}).appendTo(notifyBar);notifybarClose.add(zjQuery("#ztb-will-do-later")).bind("click.notifybar",function(){if(zjQuery("#ztb-upgradeLink").length<1){var ztbOtherEditions=zjQuery("<div>").attr({"class":"ztb-text-type",id:"ztb-upgradeLink",type:"text"}).prependTo(zjQuery("#ztb-textTypeCont"));zjQuery("<a>").attr({"class":"ztb-anchor",href:base._trialUpgradeLink,target:"_blank"}).appendTo(ztbOtherEditions).text(base._getString("upgrade")),zjQuery("#ztb-service-info").css("border-right-width","0px")}else zjQuery("#ztb-upgradeLink").slideDown(100);notifyBar.slideUp(200),setTimeout(function(){notifyBar.addClass("ztb-collapse")},300),base._triggerEvent(base._EVENTS.TRIALCLOSE)}),base._triggerEvent(base._EVENTS.TRIALOPEN),zjQuery("#ztb-tryOtherEditions").hide(),base._initTooltipEvents()}var remaingDays=parseInt(trialInfo.remainingDays),msg=void 0;if(remaingDays>=0&&(msg=this._getString(0===remaingDays?"trialNotifyMessageToday":1===remaingDays?"trialNotifyMessageTomorrow":"trialNotifyMessage"),zjQuery("#ztb-will-do-later").addClass("ztb-collapse"),zjQuery("#ztb-notifybar-close").removeClass("ztb-collapse")),0>remaingDays&&(msg=this._getString("trialNotifyMessageExpired"),zjQuery("#ztb-will-do-later").removeClass("ztb-collapse"),zjQuery("#ztb-notifybar-close").addClass("ztb-collapse")),!msg)return void notifyBar.addClass("ztb-collapse");var label=this._replaceMessage(msg,["<b>"+trialInfo.plan+"</b>",remaingDays]);notifyBar.find("span").html(label),notifyBar.find("button").text(this._getString("upgradeNow")).click(function(){window.open(base._trialUpgradeLink,"_blank")}),notifyBar.hasClass("ztb-collapse")&&(notifyBar.removeClass("ztb-collapse"),notifyBar.slideDown(200),zjQuery("#ztb-upgradeLink").hide())}},hideTrialInfo:function(){var notifyBarClose=zjQuery("#ztb-notifybar-close");notifyBarClose&&(notifyBarClose.trigger("click"),this._documentEle.trigger("mouseup.document"),this._documentEle.trigger("mouseup.doc"))},_replaceMessage:function(msg,args){if("undefined"!=typeof args&&args.length>0)for(var i=0;i<args.length;i++){var regEx=new RegExp("\\{"+i+"\\}","gi");msg=msg.replace(regEx,args[i])}return msg},_getTryNowURL:function(appName){var tryNowURL="";if(this._isAppsInfoMapped&&this._myAppsData){var appInfo=this._myAppsData[appName];if("object"==typeof appInfo)if(!appInfo.isMyApp&&void 0!==appInfo.isMyApp&&appInfo.tryNowURL&&""!==appInfo.tryNowURL){tryNowURL=appInfo.tryNowURL;var queryString=tryNowURL.substring(tryNowURL.indexOf("?")+1);tryNowURL+=queryString!==tryNowURL?"&src=topbar":"?src=topbar"}else appInfo.isMyApp&&appInfo.url&&(tryNowURL=appInfo.url)}return""===tryNowURL&&"site24x7"===appName&&(tryNowURL="//site24x7.com/home/Welcome.do"),""!==tryNowURL?tryNowURL:this._websiteLink?this._websiteLink+appName+"?src=topbar":""},_profileToggle:function(){this.transitionSupport=void 0!==zjQuery("body").css("transition")?!0:!1;var profileEle=zjQuery("#ztb-profile"),profileImgEle=zjQuery("#ztb-profile img");if(this.isOpen){profileEle.removeClass("ztb-profile-collapse"),-1!==navigator.appVersion.indexOf("MSIE 7.")?profileEle.css({height:"auto"}).addClass("ztb-expand"):(profileEle.addClass("ztb-expand"),profileEle.css({height:this.ztbProfileDetails.outerHeight(!0)+this.profileHeader.outerHeight(!0)})),this.isOpen=!1;var px=0,py=0,base=this;this._documentEle.bind("mouseup.doc",function(e){if(zjQuery(e.target).closest("#ztb-profile")[0]===profileEle[0]){if(px!==e.pageX||py!==e.pageY)return void(base.isOpen=!0);base.isOpen=!1}else base.isOpen=!0;profileEle.addClass("ztb-profile-collapse"),profileEle.css("height",profileEle.data("imageHeight")).removeClass("ztb-expand"),base._documentEle.unbind("mouseup.doc")}).bind("mousedown",function(e){px=e.pageX,py=e.pageY})}else profileEle.addClass("ztb-profile-collapse").css("height",profileEle.data("imageHeight")).removeClass("ztb-expand"),this.isOpen=!0;profileImgEle.add("#ztb-profile > a").mouseenter(function(){profileImgEle[0].height!==profileEle.data("imageHeight")?zjQuery("#ztb-profile > a").css("display","block"):zjQuery("#ztb-profile > a").css("display","none")}).mouseout(function(){profileImgEle[0].height!==profileEle.data("imageHeight")&&zjQuery("#ztb-profile > a").css("display","none")})},_createTooltip:function(){this.ztooltip=zjQuery("<div>").attr({"class":"ztb-ztooltip ztb-font-family"}).html("<span></span><div></div>").appendTo(zjQuery("body")),this._initTooltipEvents()},_initTooltipEvents:function(targetEle){if(this.ztooltip){var ztooltip=this.ztooltip,ztooltipTime=0,fadeOutTime=0;targetEle=targetEle?targetEle:zjQuery(".ztooltip"),targetEle.unbind("mouseenter.ztooltip mouseleave.ztooltip click.ztooltip").bind("mouseenter.ztooltip",function(){if(!zjQuery(this).hasClass("ztb-active")){var currElement=zjQuery(this);ztooltipTime=setTimeout(function(){if(""!=currElement.attr("ztooltip")&&void 0!=currElement.attr("ztooltip")){var body=zjQuery("body"),bodyWidth=body.innerWidth();ztooltip.fadeIn(200).find("div").text(currElement.attr("ztooltip"));var tTop=parseInt(currElement.offset().top+currElement.innerHeight()+6),tLeft=parseInt(currElement.offset().left-(ztooltip.innerWidth()/2-currElement.innerWidth()/2)),ztooltipLeft=parseInt(ztooltip.innerWidth()/2-5);if(1>=tLeft)ztooltipLeft+=tLeft,tLeft=1;else if(tLeft+ztooltip.innerWidth()>bodyWidth){var checkLeft=tLeft+ztooltip.innerWidth()-bodyWidth+1;ztooltipLeft+=checkLeft,tLeft-=checkLeft}ztooltip.css({top:tTop,left:tLeft}),ztooltip.find("span").css("left",ztooltipLeft),fadeOutTime=setTimeout(function(){clearTimeout(ztooltipTime),ztooltip.fadeOut(200)},5e3)}},500)}}).bind("mouseleave.ztooltip",function(){clearTimeout(ztooltipTime),clearTimeout(fadeOutTime),ztooltip.fadeOut()}).bind("click.ztooltip",function(){clearTimeout(ztooltipTime),clearTimeout(fadeOutTime),ztooltip.hide()})}},_userIdTooltip:function(){this.userIdTooltip||(this.userIdTooltip=zjQuery("<div>").attr({id:"ztb-user-id-tooltip","class":"ztb-font-family"}).html("<span></span><span id='ztb-uid-tooltip-arrow'></span><div><p>"+this._getString("userIdTooltipDefinition")+"</p><p>"+this._getString("userIdTooltipDescription")+"</p></div>").appendTo(zjQuery("body")));var userIdTooltip=this.userIdTooltip,userTooltipTime=0,fadeOutTime1=0,body=zjQuery("body");zjQuery("#ztb-zoho-uid-info").bind("mouseenter",function(){var currElement=zjQuery(this);userTooltipTime=setTimeout(function(){var bodyWidth=body.innerWidth();userIdTooltip.show();var tTop=parseInt(currElement.offset().top+currElement.innerHeight()+10),tLeft=parseInt(currElement.offset().left-(userIdTooltip.innerWidth()/2-currElement.innerWidth()/2)),ztooltipLeft=parseInt(userIdTooltip.innerWidth()/2);if(1>=tLeft)ztooltipLeft+=tLeft,tLeft=1;else if(tLeft+userIdTooltip.innerWidth()>bodyWidth){var checkLeft=tLeft+userIdTooltip.innerWidth()-bodyWidth+1;ztooltipLeft+=checkLeft,tLeft-=checkLeft}userIdTooltip.css({top:tTop}),zjQuery(userIdTooltip.find("span")[0]).css("left",ztooltipLeft),zjQuery(userIdTooltip.find("span")[1]).css("left",ztooltipLeft+2)},100)}).bind("mouseout click",function(){clearTimeout(userTooltipTime),clearTimeout(fadeOutTime1),userIdTooltip.fadeOut()}),zjQuery("#ztb-zoho-uid").click(function(){userIdTooltip.fadeOut()})},open:function(){var eleID=this.parentElement?this.parentElement:this.clickEle[0].id,eleObj=zjQuery("#"+eleID);eleObj.hasClass("ztb-active")||"popover"!==eleObj.attr("type")&&"menu"!==eleObj.attr("type")||this._toggle(eleObj)},close:function(){var eleID=this.parentElement?this.parentElement:this.clickEle[0].id,eleObj=zjQuery("#"+eleID);eleObj.hasClass("ztb-active")&&("popover"===eleObj.attr("type")?this._toggle(eleObj):"menu"===eleObj.attr("type")&&this._toggle(eleObj))},_triggerEvent:function(e,ui){this.mainCont.trigger(this._widgetEventPrefix+e,ui)},_refreshMenu:function(optionID){var menuObj=zjQuery("#"+optionID+"-menu"),menuContent=menuObj.find("span.ztb-menu-icon");menuContent.length?menuObj.addClass("ztb-menu-icontext"):menuObj.removeClass("ztb-menu-icontext"),this.showEle=menuObj,this._setPosition(zjQuery("#"+optionID))},setPosition:function(positionToToggle){var curPosition=this.mainCont.css("position");return curPosition!==positionToToggle?("relative"===positionToToggle&&zjQuery(".ztb-fixed").removeClass("ztb-fixed"),this.mainCont.css({position:positionToToggle}),curPosition):void 0},show:function(status){status?(this.mainCont.hide(),this._triggerEvent(this._EVENTS.ONCLOSE)):(this.mainCont.show(),this._triggerEvent(this._EVENTS.ONOPEN))}},ztopbar=function(data){data.properWay=!0,topbarObj=zTopbar(data)},ztopbar.addItem=function(Obj){topbarObj.addItem(Obj)},ztopbar.removeItem=function(ObjID){topbarObj.removeItem(ObjID)},ztopbar.item=function(ObjID){return topbarObj.item(ObjID),topbarObj},ztopbar.hideTrialInfo=function(){topbarObj.hideTrialInfo()},ztopbar.showTrialInfo=function(trialInfo){topbarObj.showTrialInfo(trialInfo)},ztopbar.updateMessages=function(htmlString){topbarObj.item("messages").innerHTML(htmlString)},ztopbar.updateMessagesCount=function(number){topbarObj.item("messages").updateCount(number)},ztopbar.updateNotifications=function(htmlString){topbarObj.item("notifications").innerHTML(htmlString)},ztopbar.updateNotificationsCount=function(number){topbarObj.item("notifications").updateCount(number)},ztopbar.setPosition=function(positionToToggle){topbarObj.setPosition(positionToToggle)},ztopbar.changeLogo=function(src){topbarObj._initRebradingLogo(src)},ztopbar.selectPortal=function(portalID){topbarObj._changePortal(portalID)},ztopbar.userInfo=function(userInfo,value){return topbarObj._changeUserInfo(userInfo,value)},ztopbar.search=function(){return topbarObj},ztopbar.search.placeholder=function(text){return topbarObj._changePlaceholder(text)},ztopbar.search.showClearButton=function(){topbarObj._showClearText()},ztopbar.search.hideClearButton=function(){topbarObj._hideClearText()},ztopbar.open=function(){topbarObj.show(!0)},ztopbar.close=function(){topbarObj.show(!1)}}(),ztopbar.getDefaults=function(){return{getAllAppsJSON:function(){return[{category:"salesAndMarketing",apps:["crm","motivator","campaigns","survey","sites","salesiq","social","contactmanager","forms"],position:1},{category:"businessProcesses",apps:["creator","reports","site24x7"],position:2},{category:"emailAndCollaboration",apps:["mail","chat","connect","docs","projects","bugtracker","meeting","showtime","vault"],position:3},{category:"helpdesksoftware",apps:["support","assist"],position:4},{category:"finance",apps:["books","invoice","subscriptions","expense","inventory"],position:5},{category:"humanresources",apps:["people","recruit"],position:6}]}}}(),ztopbar.suite="Zoho",ztopbar.isSwitchToMenuEnabled=!0,ztopbar.hasUserReferrals=!0,ztopbar.displayUserID=!0,ztopbar.allAppsCategoryListOrder=[[1,2,3],[4,5,6]],ztopbar.suite="SkyDesk",ztopbar.isSwitchToMenuEnabled=!0,ztopbar.hasUserReferrals=!1,ztopbar.displayUserID=!1,ztopbar.allAppsCategoryListOrder=[[3,1,2],[4]],ztopbar.supportedApps=["crm","campaigns","support","creator","reports","mail","docs","projects"];